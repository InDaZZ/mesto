(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{OW:()=>S,O_:()=>k});class t{constructor(e,t,s){this._templateSelector=t,this._name=e.name,this._link=e.link,this._alt=e.alt,this._handleCardClick=s}_getTemplateSelector(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_pushLike(){this._like.classList.toggle("element__like_active")}_deleteBotton(){this._elementDelete.closest(".element").remove()}_setEventListeners(){this._like.addEventListener("click",(()=>{this._pushLike()})),this._elementDelete.addEventListener("click",(()=>{this._deleteBotton()})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link,this._alt)}))}generateCard(){return this._element=this._getTemplateSelector(),this._image=this._element.querySelector(".element__image"),this._text=this._element.querySelector(".element__text"),this._elementDelete=this._element.querySelector(".element__delete"),this._like=this._element.querySelector(".element__like"),this._image.src=this._link,this._image.alt=this._alt,this._text.textContent=this._name,this._setEventListeners(),this._element}}class s{constructor(e,t){this._formtElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._formtElement.querySelector(`.${e.id}-error`);e.validity.valid||(t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass))}_hideInputError(e){const t=this._formtElement.querySelector(`.${e.id}-error`);e.validity.valid&&(t.textContent=" ",e.classList.remove(this._inputErrorClass))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvaliInput(){return this._inputList.some((e=>!e.validity.valid))}disableSubmitButton(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}_toggleButoronState(){this._hasInvaliInput(this._inputList)?this.disableSubmitButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._formtElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formtElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButoronState()}))}))}enableValidation(){this._setEventListeners()}}class i{constructor(e){this._popupSelector=e}open(){this._popupSelector.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose.bind(this)),this._popupSelector.addEventListener("click",this._popupsCloseByClick.bind(this)),this.cloose(),console.log(this.butoonClose)}_handleEscClose(e){27===e.keyCode&&this._popupSelector.classList.remove("popup_active")}_popupsCloseByClick(e){e.target===this._popupSelector&&this._popupSelector.classList.remove("popup_active")}cloose(){this.butoonClose=this._popupSelector.querySelector(".popup__button-close"),this.butoonClose.addEventListener("click",(()=>{this._popupSelector.classList.remove("popup_active")}))}}class o extends i{constructor(e,t){super(),this._popupSelector=e,this.submitCallBack=t,this.form=this._popupSelector.querySelector(".popup__form"),this.inputList=Array.from(this.form.querySelectorAll(".popup__item"))}_getInputValues(){const e={};return this.inputList.forEach((t=>{e[t.name]=t.value})),console.log(e),e}close(){super.close().bind(this),this._form.reset()}open(){super.open(),this.form.addEventListener("submit",this._submitClick.bind(this))}_submitClick(e){e.preventDefault(),this.submitCallBack(this._getInputValues()),this._popupSelector.classList.remove("popup_active")}setEventListeners(){super.setEventListeners().bind(this)}}const r={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__item-type_error",errorClass:"popup__error"},n=document.querySelector(".profile__edit-button"),l=document.querySelector("#popupProfile"),a=document.querySelector(".profile__name"),p=document.querySelector(".profile__activity"),c=document.querySelector(".profile__add-button"),u=document.querySelector("#popupCard"),_=document.querySelector(".popup__item_type_card-name"),d=document.querySelector(".popup__item_type_card-link"),h=document.querySelector("#popupFormCard"),m=document.querySelector("#popupFormProfile"),v=document.querySelector(".elements"),y=document.querySelector("#popupImage"),S=document.querySelector(".popup__image"),k=document.querySelector(".popup__image-title"),f=new class{constructor({data:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(s)}additem(e){this._container.append(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({data:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",alt:"Архыз-Фото"},{name:"Челябинская область-Фото",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",alt:"Челябинская область-Фото"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",alt:"Иваново-Фото"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",alt:"Камчатка-Фото"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",alt:"Холмогорский район-Фото"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",alt:"Байкал-Фото"}],renderer:e=>{const s=new t(e,"#element-template",L).generateCard();f.additem(s)}},".elements");f.renderItems();const C=new o(l,(function(e){b.setUserInfo(e)}));n.addEventListener("click",(()=>C.open()));const b=new class{constructor({profileName:e,activity:t}){this._profileName=e,this._activity=t}getUserInfo(){const e={};return e.fullName=this._profileName.textContent,e.activity=this._activity.textContent,e}setUserInfo(e){this._profileName.textContent=e.fullName,this._activity.textContent=e.activity}}({profileName:a,activity:p}),E=new o(u,(()=>{const e={name:_.value,link:d.value};var s;s=new t(e,"#element-template").generateCard(),v.prepend(s)})),g=new class extends i{constructor(e){super(e)}open(e,t,s){super.open(),k.textContent=e,S.src=t,S.alt=s}cloose(){super.cloose()}}(y);function L(e,t,s){g.open(e,t,s)}c.addEventListener("click",(()=>E.open())),new s(r,m).enableValidation(),new s(r,h).enableValidation()})();